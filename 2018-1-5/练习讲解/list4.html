<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
		    html,body{
		    	width: 100%;
		    	height: 100%;
		    	margin: 0;
		    }
		    body{
		    	background: url(img/zpbg.png) no-repeat center center;
		    	background-size: cover;
		    	display: flex;
		    }
		    ul,li{
		    	margin: 0;
		    	padding: 0;
		    	list-style: none;
		    }
		    p{
		    	margin: 0;
		    }
		    a{
		    	text-decoration: none;
		    	color:#b6bdcf;
		    }
		    #content{
		    	width: 700px;
		    	height: 460px;
		    	border-radius: 10px;
		    	border: 1px solid #30343f;
		    	margin: auto;
		    	background: url(img/logo.png) no-repeat 25px 25px #252934;
		    	box-sizing: border-box;
		    	padding: 84px 0px 0px 25px;
		    }
		    #leftList{
		    	float: left;
		    	width: 60px;
		    	padding-right: 12px;
		    	height: 100%;
		    	background: url(img/leftListBg.png) no-repeat right top;
		    }
		    #leftList li{
		    	text-align: right;
		    	height: 68px;
		    	padding-top: 12px;
		    	color: #6a7686;
		    	font: 10px/18px "微软雅黑";
		    }
		    #leftList li span{
		    	font-size: 12px;
		    	display: block;
					cursor: pointer;
		    }
		    #leftList .active span{
		    	color: #ff2c4f;
		    }
		    #right{
		    	width: 600px;
		    	height: 100%;
		    	float: left;
		    }
		    #rightList li{
		    	height: 82px;
		    	width: 100%;
		    	box-sizing: border-box;
		    	padding: 20px 25px 20px 30px;
		    	position: relative;
					cursor: pointer;
		    }
		    #rightList li:hover{
		    	background-color: #1e212a;
		    }
		    #rightList li:hover .num{
		    	color: #ff2c4f;
		    }
		    #rightList li:hover:before{
		    	content: "";
		    	width: 2px;
		    	height: 54px;
		    	position: absolute;
		    	background-color: #ff2c4f;
		    	left: -3px;
		    	top: 10px;
		    }
		    #rightList li:after{
		    	content: "";
		    	width: 543px;
		    	height: 1px;
		    	position: absolute;
		    	bottom: 0px;
		    	right: 25px;
		    	background:url(img/lineBg.png) repeat-x;
		    }
		    #rightList .num{
		    	font-size: 30px;
		    	font-family: arial;
		    	color:#6a7686;
		    	float: left;
		    	width: 36px;
		    	height: 40px;
		    	border-right: 1px solid #303642;
		    }
		    #rightList .list{
		    	float: left;
		    	width: 500px;
		    	margin-left: 6px;
		    	font-size: 14px;
		    	color: #b6bdcf;
		    	font-family: "微软雅黑";
		    }
		    #rightList .list span{
		    	float: left;
		    }
		    
		    .list>a:nth-of-type(1){
		    	height: 26px;
		    	float: none;
		    	font-size: 14px;
		    }
		    .job{
		    	margin-right: 15px;
		    }
		    #rightList .list time{
		    	float: right;
		    	color: #606a7a;
		    }
		    .list .text{
		    	float: left;
		    	width: 430px;
		    	overflow: hidden;
				white-space: nowrap;
				text-overflow: ellipsis;
		    }
		    .list a{
		    	float: right;
		    	font-size: 12px;
		    }
		    nav{
		    	font-size: 0px;
		    	text-align: center;
		    }
		    nav a{
		    	font: 12px/46px "微软雅黑";
		    	display: inline-block;
		    	vertical-align: middle;
		    	width: 24px;
		    }
		    nav a.active{
		    	color: #eb2a4b;
		    }
		</style>
	</head>
	<body>
		<div id="content">
			<ul id="leftList">
				<!-- <li><span>社会招聘</span>society</li>
				<li class="active"><span>校园招聘</span>campus</li> -->
			</ul>
			<div id="right">
				<ul id="rightList">					
					<!-- <li>
						<span class="num">01</span>
						<div class="list">
							<a href=""><span class="job">职位需求：前端开发工程师</span><span>需求人数：2名</span><time>2014-04-10</time></a>
							<p><span class="text">岗位要求：布拉布拉布拉一大段话布拉布拉布拉一大段话布拉布拉布拉一大段话</span><a href="javascript:;">查看详情>></a></p>
						</div>
					</li>
					<li>
						<span class="num">02</span>
						<div class="list">
							<a href=""><span class="job">职位需求：前端开发工程师</span><span>需求人数：2名</span><time>2014-04-10</time></a>
							<p><span class="text">岗位要求：布拉布拉布拉一大段话布拉布拉布拉一大段话布拉布拉布拉一大段话</span><a href="javascript:;">查看详情>></a></p>
						</div>
					</li>
					<li>
						<span class="num">03</span>
						<div class="list">
							<a href=""><span class="job">职位需求：前端开发工程师</span><span>需求人数：2名</span><time>2014-04-10</time></a>
							<p><span class="text">岗位要求：布拉布拉布拉一大段话布拉布拉布拉一大段话布拉布拉布拉一大段话</span><a href="javascript:;">查看详情>></a></p>
						</div>
					</li>
					<li>
						<span class="num">04</span>
						<div class="list">
							<a href=""><span class="job">职位需求：前端开发工程师</span><span>需求人数：2名</span><time>2014-04-10</time></a>
							<p><span class="text">岗位要求：布拉布拉布拉一大段话布拉布拉布拉一大段话布拉布拉布拉一大段话</span><a href="javascript:;">查看详情>></a></p>
						</div>
					</li> -->
				</ul>
				<nav id="nav">
					<!-- <a href="javascript:;">&lt;</a>
					<a class="active" href="javascript:;">1</a>
					<a href="javascript:;">2</a>
					<a href="javascript:;">3</a>
					<a href="javascript:;">4</a>
					<a href="javascript:;">&gt;</a> -->
				</nav>
			</div>
		</div>
<script src="js/data.js"></script>
<script>	
	//导航
	const nav = document.getElementById('leftList');
	//数据列表页
	const rightList = document.getElementById('rightList');
	//页码
	const page = document.getElementById('nav');

	let num = 1; //默认为第一页。

	/*
		前进后退

		分享

		返回对应的页面
	*/

	//默认的数据（校园）
	let hh = window.location.hash;
	let h = '';
	if(hh){
		h = hh.substring(1).split('&')[0];
		if(hh.substring(1).split('&')[1]){
			num = hh.substring(1).split('&')[1].split('=')[1]*1;
		}
	}else{
		h = 'lx=sh';
	}
	window.location.hash = h + '&page='+num;//为了一会去拼接hash(代表的是校园还是社会)
	
	let newData = data[h.split('=')[1]];


	/*
		渲染导航
		<li><span>社会招聘</span>society</li>
		<li class="active"><span>校园招聘</span>campus</li>
	*/

	let list = data.list;
	let html = '';
	//当返回的时候通过hash值来判断是导航的社会招聘红还是校园招聘红。
	let active = h.split('=')[1] == 'sh'?0:1;
	
	list.forEach((e,i) => {
		html += `
			<li data-lx="${e.lx}" class="${i==active?'active':''}">
				<span>${e.text}</span>
				${e.eng}
			</li>
		`;
	});
	nav.innerHTML = html;
	let btns = Array.from(nav.children);
	btns.forEach((e,i)=>{
		e.onclick = function(){
			btns.map(e=>e.className='');
			e.className = 'active';	
			h = 'lx='+e.dataset.lx;
			num = 1;
			window.location.hash = h;
		}
	});


	/*
		渲染视图
	*/

	// console.log(newData);
	rightList.innerHTML = render(num-1);
	/*
		0   0-3
		1   4-7
		2   8-11

	*/
	
	function render(num=0){
		let temp = '';
		console.log(newData);
		for(var i=num*4;i<num*4+4;i++){
			let d = newData.text[i];
			if(d){
				temp += `
					<li>
						<span class="num">${data.add0(i+1)}</span>
						<div class="list">
							<a href="content.html?${h.split('=')[1]}&${i}">
								<span class="job">职位需求：${d.zw}</span><span>需求人数：${d.rs}名</span><time>${data.formateDate(d.sj)}</time>
							</a>
							<p><span class="text">岗位要求：${d.info[0].l.join('')}</span><a href="javascript:;">查看详情>></a></p>
						</div>
					</li>
				`;
			}
		}
		return temp;
	}

	/*
		分页
		<a href="javascript:;">&lt;</a>
		<a class="active" href="javascript:;">1</a>
	*/
	createPage();
	function createPage(){
		let n = num-1 < 0?0:num-1;
		let len = Math.ceil(newData.text.length/4);
		let pageStr = '<a href="javascript:;">&lt;</a>';
		for(var i=0;i<len;i++){
			pageStr += `<a class="${i==n?'active':''}" href="javascript:;">${i+1}</a>`;
		}
		pageStr += '<a href="javascript:;">&gt;</a>';
		page.innerHTML = pageStr;
	}


	/*
		点击切换数据
	*/

	page.onclick = function(ev){
		if(ev.target.tagName === 'A'){
			if(!isNaN(ev.target.innerText*1)){
				rightList.innerHTML = render(ev.target.innerText-1);
				Array.from(page.children).forEach(e=>e.className='');
				ev.target.className = 'active';
				num = ev.target.innerText * 1;
				//alert(1);
			}else{
				//点击上一个或者下一个
				if(ev.target.innerText === '>'){
					num ++;
					if(num > page.children.length-2){
						num = page.children.length-2;
					}
				}else{
					num --;
					if(num < 1){
						num = 1;
					}
				}
			}

			window.location.hash = h + '&page='+num;
		}
	}



	/*
		lx=sh page=1
	*/
	window.onhashchange = function(){
		let hash = window.location.hash.split('&'); //?
		
		for(var i=0;i<hash.length;i++){
			if(hash[i].includes('lx=')){
				hash = hash[i].substring(4);
			}
		}
		newData = data[hash];
		
		rightList.innerHTML = render(num-1); //渲染数据
		createPage(); //渲染分页
	}


	





	




	console.log(data);




</script>
</body>
</html>
