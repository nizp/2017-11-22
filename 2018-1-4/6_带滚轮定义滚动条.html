<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
<style>
*{
    margin: 0;
    padding: 0;
}
#div1{
    width:30px;
    height: 300px;
    background: black;
    position: relative;
}
#div2{
    width:30px;
    height: 30px;
    position: absolute;
    top:0;
    left:0;
    background: red;
}
#div3{
    width:300px;
    height: 300px;
    border: 1px solid #000;
    position: relative;
    top:-300px;
    left:50px;
    overflow: hidden;
}
#txt{
    position: absolute;
    top:0;
    left:0;
}
</style>
</head>
<body>
    <div id="div1">
        <div id="div2"></div>
    </div>
    <div id="div3">
        <div id="txt">
                2.1 - JS语言核心：ECMAScript
                2.1.1 - 定义JS的语法、基本对象、数据类型…
                2.1.2 - JS的数据类型
                2.1.3 - 数据类型转换
                2.1.4 - 强制类型转换
                2.1.5 - 隐式类型转换
                2.2 - 运算符
                2.2.1 - 算术：+ 加、- 减、* 乘、/ 除、% 取模（求余数）
                2.2.2 - 赋值：=、+=、-=、*=、/=、%=
                2.2.3 - 关系：<、>、<=、>=、==、!=、===、!==
                2.2.4 - 逻辑：&& 与、|| 或、! 否
                2.2.5 - 运算符优先级：括号
                2.3 - 函数传参
                2.3.1 - 函数括号()的作用
                2.3.2 - 函数传参实例
                2.4 - JS作用域
                2.4.1 - 作用域概念
                2.4.2 - JS解析器执行方式
                2.4.3 - 作用域应用场景
                2.5 - 程序流程控制
                2.5.1 - 判断：if、switch（case break default）、?:
                2.5.2 - 循环：while、for
                2.5.3 - 跳出：break、continue
                2.5.4 - 什么是真、什么是假
                本章节案例&练习：
                >> 修改文本框的值
                >> 商品累计
                >> 验证QQ号码
                >> 找数据
                2.1 - JS语言核心：ECMAScript
                2.1.1 - 定义JS的语法、基本对象、数据类型…
                2.1.2 - JS的数据类型
                2.1.3 - 数据类型转换
                2.1.4 - 强制类型转换
                2.1.5 - 隐式类型转换
                2.2 - 运算符
                2.2.1 - 算术：+ 加、- 减、* 乘、/ 除、% 取模（求余数）
                2.2.2 - 赋值：=、+=、-=、*=、/=、%=
                2.2.3 - 关系：<、>、<=、>=、==、!=、===、!==
                2.2.4 - 逻辑：&& 与、|| 或、! 否
                2.2.5 - 运算符优先级：括号
                2.3 - 函数传参
                2.3.1 - 函数括号()的作用
                2.3.2 - 函数传参实例
                2.4 - JS作用域
                2.4.1 - 作用域概念
                2.4.2 - JS解析器执行方式
                2.4.3 - 作用域应用场景
                2.5 - 程序流程控制
                2.5.1 - 判断：if、switch（case break default）、?:
                2.5.2 - 循环：while、for
                2.5.3 - 跳出：break、continue
                2.5.4 - 什么是真、什么是假
                本章节案例&练习：
                >> 修改文本框的值
                >> 商品累计
                >> 验证QQ号码
                >> 找数据
        </div>
    </div>
<script>
    const div1 = document.getElementById('div1');
    const div2 = document.getElementById('div2');
    const div3 = document.getElementById('div3');
    const txt = document.getElementById('txt');
    div2.onmousedown = function(ev){
        let disY = ev.pageY - div2.offsetTop;

        document.onmousemove = function(ev){
            let t = ev.pageY - disY;

            if(t < 0){
                t = 0;
            }else if(t > div1.clientHeight - div2.clientHeight){
                t = div1.clientHeight - div2.clientHeight;
            }

            /*
                核心就是这个比例
            */
            let scale = t /  (div1.clientHeight - div2.clientHeight);
            
            txt.style.top =  scale *  (div3.offsetHeight - txt.scrollHeight) + 'px';
            div2.style.top = t + 'px';
        }
        document.onmouseup = function(){
            document.onmousemove = document.onmouseup = null;
        }
        return false;
    }

    addWheel(div1,function(o){
        let t = div2.offsetTop;
        if(o){
            t -= 5;
        }else{
            t += 5;
        }

        if(t < 0){
            t = 0;
        }else if(t > div1.clientHeight - div2.clientHeight){
            t = div1.clientHeight - div2.clientHeight;
        }

        let scale = t /  (div1.clientHeight - div2.clientHeight);
            
        txt.style.top =  scale *  (div3.offsetHeight - txt.scrollHeight) + 'px';


        div2.style.top = t + 'px';
    });


    function addWheel(obj,fn){
        obj.addEventListener('mousewheel',callback);
        obj.addEventListener('DOMMouseScroll',callback);

        function callback(ev){
            let o = true; //向上
            if(ev.wheelDelta){
                o = ev.wheelDelta > 0?true:false;
            }else{
                o = ev.detail < 0? true:false;
            }
            fn && fn(o);
            ev.preventDefault();
        }
    }

</script>
</body>
</html>